{"ast":null,"code":"// TypingGame.js\nimport React,{useState,useEffect}from'react';import'./TypingGame.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const TypingGame=_ref=>{let{text,onSubmit,totalScore}=_ref;const[inputText,setInputText]=useState('');const[startTime,setStartTime]=useState(Date.now());const[errors,setErrors]=useState(0);const[elapsedTime,setElapsedTime]=useState(0);const handleKeyPress=e=>{if(e.key==='Enter'){handleSubmit();}};useEffect(()=>{const timer=setInterval(()=>{setElapsedTime((Date.now()-startTime)/1000);},1000);return()=>clearInterval(timer);},[startTime]);useEffect(()=>{const handleCopy=e=>{e.preventDefault();alert('禁止複製貼上');};const handlePaste=e=>{e.preventDefault();alert('禁止複製貼上');};document.addEventListener('copy',handleCopy);document.addEventListener('paste',handlePaste);return()=>{document.removeEventListener('copy',handleCopy);document.removeEventListener('paste',handlePaste);};},[inputText,errors]);const handleChange=e=>{const typedText=e.target.value;setInputText(typedText);let errorCount=0;for(let i=0;i<typedText.length;i++){if(typedText[i]!==text[i]){errorCount++;}}setErrors(errorCount);};const handleSubmit=()=>{const endTime=Date.now();const elapsedTime=(endTime-startTime)/1000;const totalErrors=text.length-inputText.length+errors;const errorRate=totalErrors/text.length*100;onSubmit(totalErrors,elapsedTime);};return/*#__PURE__*/_jsxs(\"div\",{className:\"typing-game-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-container\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"timer\",children:[\"\\u8A08\\u6642\\u5668\\uFF1A\",Math.floor((Date.now()-startTime)/1000),\"\\u79D2\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"score\",children:[\"\\u7E3D\\u5F97\\u5206\\uFF1A\",totalScore,\"\\u5206\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-input-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text\",children:text}),/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea\",type:\"text\",value:inputText,onChange:handleChange,onKeyPress:handleKeyPress,onCopy:e=>e.preventDefault(),onPaste:e=>e.preventDefault(),rows:5,cols:40,wrap:\"soft\"}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-button\",onClick:handleSubmit,children:\"\\u63D0\\u4EA4\"})]})]});};export default TypingGame;","map":{"version":3,"names":["React","useState","useEffect","jsxs","_jsxs","jsx","_jsx","TypingGame","_ref","text","onSubmit","totalScore","inputText","setInputText","startTime","setStartTime","Date","now","errors","setErrors","elapsedTime","setElapsedTime","handleKeyPress","e","key","handleSubmit","timer","setInterval","clearInterval","handleCopy","preventDefault","alert","handlePaste","document","addEventListener","removeEventListener","handleChange","typedText","target","value","errorCount","i","length","endTime","totalErrors","errorRate","className","children","Math","floor","type","onChange","onKeyPress","onCopy","onPaste","rows","cols","wrap","onClick"],"sources":["/Users/lutingwei/Desktop/typing-test/src/TypingGame.js"],"sourcesContent":["// TypingGame.js\nimport React, { useState, useEffect } from 'react';\nimport './TypingGame.css';\n\nconst TypingGame = ({ text, onSubmit, totalScore }) => {\n  const [inputText, setInputText] = useState('');\n  const [startTime, setStartTime] = useState(Date.now());\n  const [errors, setErrors] = useState(0);\n  const [elapsedTime, setElapsedTime] = useState(0);\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n        handleSubmit();\n    }\n  };\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setElapsedTime((Date.now() - startTime) / 1000);\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [startTime]);\n\n  useEffect(() => {\n    \n    const handleCopy = (e) => {\n      e.preventDefault();\n      alert('禁止複製貼上');\n    };\n    const handlePaste = (e) => {\n      e.preventDefault();\n      alert('禁止複製貼上');\n    };\n\n    document.addEventListener('copy', handleCopy);\n    document.addEventListener('paste', handlePaste);\n\n    return () => {\n      document.removeEventListener('copy', handleCopy);\n      document.removeEventListener('paste', handlePaste);\n    };\n  }, [inputText, errors]);\n\n  const handleChange = (e) => {\n    const typedText = e.target.value;\n    setInputText(typedText);\n\n    let errorCount = 0;\n    for (let i = 0; i < typedText.length; i++) {\n      if (typedText[i] !== text[i]) {\n        errorCount++;\n      }\n    }\n\n    setErrors(errorCount);\n  };\n\n  const handleSubmit = () => {\n    const endTime = Date.now();\n    const elapsedTime = (endTime - startTime) / 1000;\n\n    const totalErrors = text.length - inputText.length + errors;\n    const errorRate = ((totalErrors) / text.length) * 100;\n\n    onSubmit(totalErrors, elapsedTime);\n  };\n\n  return (\n    <div className=\"typing-game-container\">\n      <div className=\"info-container\">\n        <p className=\"timer\">計時器：{Math.floor((Date.now() - startTime) / 1000)}秒</p>\n        <p className=\"score\">總得分：{totalScore}分</p>\n      </div>\n      <div className=\"text-input-container\">\n        <p className=\"text\">{text}</p>\n        <textarea \n          className=\"textarea\" \n          type=\"text\" \n          value={inputText} \n          onChange={handleChange}\n          onKeyPress={handleKeyPress}\n          onCopy={(e) => e.preventDefault()} \n          onPaste={(e) => e.preventDefault()}  \n          rows={5}\n          cols={40}\n          wrap=\"soft\"\n        />\n        <button className=\"submit-button\" onClick={handleSubmit}>提交</button>\n      </div>\n    </div>\n  );\n};\n\nexport default TypingGame;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}